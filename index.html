<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absence Analysis Dashboard - Lee County</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @media print { .no-print { display: none !important; } }
        .chart-container { position: relative; height: 400px; width: 100%; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">Absence Reason Analysis (Top 15)</h1>
                    <p class="text-gray-600 text-sm mt-1">Lee County Annual ABR 2024-2025</p>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="window.print()" class="no-print flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        📄 Print/PDF
                    </button>
                    <button onclick="shareLink()" class="no-print flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        🔗 Share Link
                    </button>
                    <div class="text-right text-sm text-gray-500">Kelly Education</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-6 py-8">
        
        <!-- Key Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-sm border p-6 text-center">
                <div class="text-3xl font-bold text-green-600 mb-2">94.9%</div>
                <div class="text-sm text-gray-600">Overall Fill Rate</div>
            </div>
            <div class="bg-white rounded-lg shadow-sm border p-6 text-center">
                <div class="text-3xl font-bold text-blue-600 mb-2">194,581</div>
                <div class="text-sm text-gray-600">Total Absences</div>
            </div>
            <div class="bg-white rounded-lg shadow-sm border p-6 text-center">
                <div class="text-3xl font-bold text-red-600 mb-2">9,946</div>
                <div class="text-sm text-gray-600">Total Unfilled</div>
            </div>
            <div class="bg-gray-800 text-white rounded-lg shadow-sm border p-6">
                <div class="space-y-3">
                    <div class="flex items-center">
                        <div class="text-2xl font-bold text-green-400 mr-3">23.7%</div>
                        <div class="text-sm">of absences are Illness-Self</div>
                    </div>
                    <div class="flex items-center">
                        <div class="text-2xl font-bold text-green-400 mr-3">12.0%</div>
                        <div class="text-sm">are Personal-Charge to sick</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chart -->
        <div class="bg-white rounded-lg shadow-sm border mb-8">
            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-2">Teachers vs Paraprofessionals Comparison</h2>
                    <p class="text-gray-600 text-sm">📊 Blue bars = Teachers | 🟢 Green bars = Paras | 🔴 Red line = Teacher Fill Rate | 🟢 Green line = Para Fill Rate</p>
                </div>
                
                <div class="chart-container mb-6">
                    <canvas id="mainChart"></canvas>
                </div>

                <!-- Legend -->
                <div class="flex flex-wrap justify-center gap-4 text-sm">
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-blue-500 mr-2"></div>
                        <span>Teacher Totals</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-green-500 mr-2"></div>
                        <span>Para Totals</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-2 bg-red-500 mr-2" style="border: 2px dashed red; background: none;"></div>
                        <span>Teacher Fill Rate %</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-2 bg-green-600 mr-2"></div>
                        <span>Para Fill Rate %</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Table -->
        <div class="bg-white rounded-lg shadow-sm border mb-8">
            <div class="p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4">Detailed Data Breakdown</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-xs">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-3 py-2 text-left font-semibold text-gray-700">Category</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">VACANCY</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">ILLNESS-SELF</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">TEMPORARY</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">PERS CHARGE</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">ILLNESS/DEATH</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">LOA</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">IEP MEETING</th>
                                <th class="px-2 py-2 text-center font-semibold text-gray-700">TESTING</th>
                            </tr>
                        </thead>
                        <tbody class="text-center">
                            <tr class="border-b bg-blue-50">
                                <td class="px-3 py-2 text-left font-medium text-gray-700">Teacher Total</td>
                                <td class="px-2 py-2 text-gray-900">38,991</td>
                                <td class="px-2 py-2 text-gray-900">30,970</td>
                                <td class="px-2 py-2 text-gray-900">24,600</td>
                                <td class="px-2 py-2 text-gray-900">15,391</td>
                                <td class="px-2 py-2 text-gray-900">7,000</td>
                                <td class="px-2 py-2 text-gray-900">3,600</td>
                                <td class="px-2 py-2 text-gray-900">1,824</td>
                                <td class="px-2 py-2 text-gray-900">1,450</td>
                            </tr>
                            <tr class="border-b bg-green-50">
                                <td class="px-3 py-2 text-left font-medium text-gray-700">Para Total</td>
                                <td class="px-2 py-2 text-gray-900">20,200</td>
                                <td class="px-2 py-2 text-gray-900">15,000</td>
                                <td class="px-2 py-2 text-gray-900">12,000</td>
                                <td class="px-2 py-2 text-gray-900">8,000</td>
                                <td class="px-2 py-2 text-gray-900">4,500</td>
                                <td class="px-2 py-2 text-gray-900">2,200</td>
                                <td class="px-2 py-2 text-gray-900">1,000</td>
                                <td class="px-2 py-2 text-gray-900">800</td>
                            </tr>
                            <tr class="border-b bg-red-50">
                                <td class="px-3 py-2 text-left font-medium text-gray-700">Teacher Fill Rate %</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">96.4%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">90.0%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">96.8%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">94.2%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">92.4%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">97.7%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">95.6%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">94.3%</td>
                            </tr>
                            <tr class="border-b bg-green-100">
                                <td class="px-3 py-2 text-left font-medium text-gray-700">Para Fill Rate %</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">97.8%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">93.0%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">97.5%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">96.9%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">96.0%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">97.9%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">96.0%</td>
                                <td class="px-2 py-2 text-gray-900 font-bold">95.6%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Performance Tables -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Teacher Performance -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                    👨‍🏫 Teacher Performance Details
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-blue-50">
                            <tr>
                                <th class="px-3 py-2 text-left font-semibold text-gray-700">Absence Reason</th>
                                <th class="px-3 py-2 text-center font-semibold text-gray-700">Total</th>
                                <th class="px-3 py-2 text-center font-semibold text-gray-700">Fill Rate</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">VACANCY</td>
                                <td class="px-3 py-2 text-center text-gray-900">38,991</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">96.4%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">ILLNESS-SELF</td>
                                <td class="px-3 py-2 text-center text-gray-900">30,970</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">90.0%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">TEMPORARY DUTY</td>
                                <td class="px-3 py-2 text-center text-gray-900">24,600</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">96.8%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">PERS CHARGE TO SICK</td>
                                <td class="px-3 py-2 text-center text-gray-900">15,391</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">94.2%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">ILLNESS/DEATH-OTHER</td>
                                <td class="px-3 py-2 text-center text-gray-900">7,000</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">92.4%</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Para Performance -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                    👩‍🎓 Paraprofessional Performance Details
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-green-50">
                            <tr>
                                <th class="px-3 py-2 text-left font-semibold text-gray-700">Absence Reason</th>
                                <th class="px-3 py-2 text-center font-semibold text-gray-700">Total</th>
                                <th class="px-3 py-2 text-center font-semibold text-gray-700">Fill Rate</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">VACANCY</td>
                                <td class="px-3 py-2 text-center text-gray-900">20,200</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">97.8%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">ILLNESS-SELF</td>
                                <td class="px-3 py-2 text-center text-gray-900">15,000</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">93.0%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">TEMPORARY DUTY</td>
                                <td class="px-3 py-2 text-center text-gray-900">12,000</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">97.5%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">PERS CHARGE TO SICK</td>
                                <td class="px-3 py-2 text-center text-gray-900">8,000</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">96.9%</span>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2 text-gray-900">ILLNESS/DEATH-OTHER</td>
                                <td class="px-3 py-2 text-center text-gray-900">4,500</td>
                                <td class="px-3 py-2 text-center">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">96.0%</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple Chart.js implementation
        const ctx = document.getElementById('mainChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['VACANCY', 'ILLNESS-SELF', 'TEMPORARY', 'PERS CHARGE', 'ILLNESS/DEATH', 'LOA', 'IEP MEETING', 'TESTING'],
                datasets: [
                    {
                        label: 'Teacher Total',
                        data: [38991, 30970, 24600, 15391, 7000, 3600, 1824, 1450],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Para Total',
                        data: [20200, 15000, 12000, 8000, 4500, 2200, 1000, 800],
                        backgroundColor: 'rgba(34, 197, 94, 0.8)',
                        borderColor: 'rgba(34, 197, 94, 1)',
                        borderWidth: 1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Teacher Fill Rate %',
                        data: [96.4, 90.0, 96.8, 94.2, 92.4, 97.7, 95.6, 94.3],
                        type: 'line',
                        borderColor: 'rgba(239, 68, 68, 1)',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        borderWidth: 3,
                        borderDash: [5, 5],
                        fill: false,
                        yAxisID: 'y1'
                    },
                    {
                        label: 'Para Fill Rate %',
                        data: [97.8, 93.0, 97.5, 96.9, 96.0, 97.9, 96.0, 95.6],
                        type: 'line',
                        borderColor: 'rgba(34, 197, 94, 1)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Total Absences'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        min: 85,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Fill Rate %'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    }
                }
            }
        });

        function shareLink() {
            navigator.clipboard.writeText(window.location.href);
            alert('Dashboard link copied to clipboard!');
        }
    </script>
</body>
</html>
